# MaxClaim Code Generation Roadmap
**Goal:** Convert all prompts/threads into production-ready, copy-paste code  
**Status:** Phase 1 - Planning  
**Date:** January 10, 2025

---

## ğŸ“‹ OVERVIEW: FROM PROMPT â†’ CODE

```
Raw Prompts & Threads
    â†“
Consolidated Requirements
    â†“
Code Task Breakdown
    â†“
Individual Code Modules
    â†“
Integrated System
    â†“
Copy-Paste Ready Markdown
    â†“
Production Deployment
```

---

## PHASE 1: CONSOLIDATE ALL PROMPTS & THREADS

### Thread 1: Initial Launch
- **Source:** "I've launched the site on Replit"
- **Key Outputs:** 
  - Current state of UI/UX
  - Existing features working
  - Data structures (priceDB.json, partners.js)
  - Current audit engine

### Thread 2: V2.0 Implementation Plan
- **Source:** "Replit v2.0 changes/implementation"
- **Key Outputs:**
  - Planned architecture
  - New features
  - Code structure improvements
  - Database schema

### Thread 3: Code Implementation
- **Source:** "New code-only thread"
- **Key Outputs:**
  - Actual implementation details
  - Code snippets
  - Testing approach
  - Deployment strategy

### Thread 4: Monetization Model
- **Source:** "I have the monetization idea"
- **Key Outputs:**
  - Revenue streams (CPC, commission, subscriptions)
  - Partner dashboard requirements
  - Lead tracking system
  - Payout mechanics

### Thread 5: Contractor Integration
- **Source:** "I'm a contractor that wants to..."
- **Key Outputs:**
  - Partner workflow
  - Dashboard needs
  - Lead management
  - Bid optimization

### Thread 6: Disaster Response
- **Source:** "I'm listening to a news report"
- **Key Outputs:**
  - Crisis features
  - Resource directories
  - Alert system
  - Advocacy integration

### Thread 7-8: Additional Context
- **Source:** Other supporting threads
- **Key Outputs:**
  - Market validation
  - User personas
  - Feature priorities
  - Integration points

---

## PHASE 2: CODE TASK BREAKDOWN

### TIER 1: Core Backend Infrastructure (Week 1)

#### Task 1.1: Weighted Partner Rotation
```
INPUT:  Prompt about "Name Your Price" bidding model
OUTPUT: src/utils/adRotation.js (35 lines)

Requirements from threads:
- Partners bid $12-$25 per click
- Weight = bid / minimumViableBid
- Weighted random selection algorithm
- Top 3 partners returned per request

Code checklist:
- [ ] getWeightedPartners(partners, count) function
- [ ] Weight calculation logic
- [ ] Random selection algorithm
- [ ] Unit tests (verify distribution)
- [ ] Export for server integration
```

#### Task 1.2: Carrier Intelligence Database
```
INPUT:  Prompt about "State Farm underpays X by 12%"
OUTPUT: src/utils/carrierIntel.js (25 lines)

Requirements from threads:
- CARRIER_TRENDS object with historical data
- getCarrierInsight(carrier, item) function
- Severity levels (LOW, HIGH)
- Warning messages for users

Code checklist:
- [ ] CARRIER_TRENDS data structure
- [ ] Lookup function
- [ ] Message formatting
- [ ] Severity calculation
- [ ] Export for audit engine
```

#### Task 1.3: Lead Lifecycle Tracking
```
INPUT:  Prompt about "Lead Status toggle" and affiliate model
OUTPUT: src/models/LeadStore.js (40 lines)

Requirements from threads:
- PENDING â†’ IN_PROGRESS â†’ CLOSED â†’ PAID
- Lead creation with userId, partnerId, claimValue
- Status updates
- Commission calculation
- Payout triggering

Code checklist:
- [ ] LeadStore object structure
- [ ] createLead() method
- [ ] updateStatus() method
- [ ] Commission calculation
- [ ] Data persistence strategy
- [ ] Export for server endpoints
```

#### Task 1.4: Server Endpoints Integration
```
INPUT:  All prompts about API structure
OUTPUT: server.js updates (5 new endpoints)

Requirements from threads:
- GET /api/partners/:trade (weighted selection)
- POST /api/leads (create lead)
- PATCH /api/leads/:leadId (update status)
- GET /api/partners/:partnerId/leads (partner dashboard data)
- POST /api/invoices/:leadId (payout trigger)

Code checklist:
- [ ] Import all utilities
- [ ] Parameter validation
- [ ] Error handling
- [ ] Response formatting
- [ ] Logging/audit trail
- [ ] Rate limiting
```

---

### TIER 2: Frontend UI Components (Week 2)

#### Task 2.1: Partner Dashboard Component
```
INPUT:  "Partner Lead Dashboard" requirements
OUTPUT: src/components/PartnerDashboard.jsx (450+ lines)

Requirements from threads:
- Real-time lead tracking (PENDING/IN_PROGRESS/CLOSED)
- Metrics cards (total leads, earnings, conversion rate)
- Lead table with actions
- Filter/sort functionality
- Modal for lead details
- Earnings panel

Code checklist:
- [ ] React component structure
- [ ] State management (leads, filter, sort)
- [ ] Metrics calculation
- [ ] Table rendering with actions
- [ ] Modal component
- [ ] API integration points
- [ ] Responsive design setup
- [ ] Mock data for testing
```

#### Task 2.2: Partner Dashboard Styling
```
INPUT:  "Professional styling" requirements
OUTPUT: src/components/PartnerDashboard.css (600+ lines)

Requirements from threads:
- Modern design system
- Dark/light mode support
- Mobile responsive (breakpoints: 480, 768, 1024)
- Professional color palette
- Smooth animations
- Accessibility compliance

Code checklist:
- [ ] CSS variables system
- [ ] Grid/flexbox layouts
- [ ] Color scheme (light/dark)
- [ ] Typography system
- [ ] Spacing/padding system
- [ ] Media queries
- [ ] Button/form styles
- [ ] Modal overlay styles
- [ ] Card component styles
```

#### Task 2.3: Audit Results Display Integration
```
INPUT:  Prompts about "Yellow Flag" and "Red Flag" display
OUTPUT: src/components/AuditResults.jsx (200+ lines)

Requirements from threads:
- Display flagged items with colors
- Show total recovery potential
- Display top 3 partners (from weighted rotation)
- Carrier intelligence warnings
- Action buttons (recoup, contact partner, export)

Code checklist:
- [ ] Flag color system (Yellow/Red/Green)
- [ ] Item table rendering
- [ ] Partner card display
- [ ] Carrier warning integration
- [ ] Export/share functionality
- [ ] Responsive layout
```

---

### TIER 3: Data Layer (Week 2-3)

#### Task 3.1: Database Schema Migration
```
INPUT:  All threads about data persistence
OUTPUT: db/schema.sql (PostgreSQL)

Requirements from threads:
- Users table
- Partners table (with weight field)
- Leads table (with status, payout fields)
- Claims table
- Invoices table
- Carrier trends table
- Audit history table

Code checklist:
- [ ] Table definitions
- [ ] Foreign key relationships
- [ ] Indexes for performance
- [ ] Migration scripts
- [ ] Seed data
- [ ] Backup strategy
```

#### Task 3.2: Database Client Wrapper
```
INPUT:  Transition from JSON to PostgreSQL
OUTPUT: src/services/database.js (100+ lines)

Requirements from threads:
- Connection pooling
- Query builders
- Error handling
- Logging
- Caching layer (optional)

Code checklist:
- [ ] Database connection setup
- [ ] Query methods (create, read, update, delete)
- [ ] Transaction support
- [ ] Error handling
- [ ] Connection pooling
- [ ] Logging integration
```

---

### TIER 4: Integration & Payment (Week 3)

#### Task 4.1: Stripe Connect Integration
```
INPUT:  "Partner payouts" requirements
OUTPUT: src/services/payments.js (80+ lines)

Requirements from threads:
- Create connected accounts for partners
- Calculate commissions
- Trigger payouts
- Generate invoices
- Handle failures
- Compliance logging

Code checklist:
- [ ] Stripe client initialization
- [ ] Account creation flow
- [ ] Payout calculation
- [ ] Payout execution
- [ ] Invoice generation
- [ ] Error handling
- [ ] Tax form handling (1099)
- [ ] Webhook handlers
```

#### Task 4.2: Authentication & Authorization
```
INPUT:  Multi-role system requirements
OUTPUT: src/middleware/auth.js + src/services/auth.js (100+ lines)

Requirements from threads:
- 4 user types (Consumer, Advocate, Partner, Admin)
- JWT tokens
- Role-based access control
- Session management
- Security headers

Code checklist:
- [ ] JWT generation/validation
- [ ] Password hashing
- [ ] Role middleware
- [ ] Protected routes
- [ ] CORS configuration
- [ ] Rate limiting
- [ ] Security headers
```

---

## PHASE 3: CODE TASK CHECKLIST

### Backend (Node.js/Express)

**Files to Create:**
```
src/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ adRotation.js          â† Task 1.1
â”‚   â”œâ”€â”€ carrierIntel.js        â† Task 1.2
â”‚   â””â”€â”€ validators.js          â† New task
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ LeadStore.js           â† Task 1.3
â”‚   â”œâ”€â”€ User.js
â”‚   â”œâ”€â”€ Partner.js
â”‚   â”œâ”€â”€ Claim.js
â”‚   â””â”€â”€ Invoice.js
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ database.js            â† Task 3.2
â”‚   â”œâ”€â”€ payments.js            â† Task 4.1
â”‚   â””â”€â”€ email.js
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.js                â† Task 4.2
â”‚   â”œâ”€â”€ errorHandler.js
â”‚   â””â”€â”€ logging.js
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ audit.js
â”‚   â”œâ”€â”€ partners.js
â”‚   â”œâ”€â”€ leads.js
â”‚   â”œâ”€â”€ invoices.js
â”‚   â””â”€â”€ admin.js
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ database.js
â”‚   â”œâ”€â”€ stripe.js
â”‚   â””â”€â”€ constants.js
â””â”€â”€ server.js                   â† Task 1.4 (update)

db/
â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ 001_initial_schema.sql
â”‚   â”œâ”€â”€ 002_add_weights.sql
â”‚   â””â”€â”€ 003_add_invoices.sql
â””â”€â”€ seeds/
    â”œâ”€â”€ partners.sql
    â””â”€â”€ carrier_trends.sql
```

### Frontend (React)

**Files to Create:**
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ PartnerDashboard.jsx   â† Task 2.1
â”‚   â”œâ”€â”€ PartnerDashboard.css   â† Task 2.2
â”‚   â”œâ”€â”€ AuditResults.jsx       â† Task 2.3
â”‚   â”œâ”€â”€ AuditResults.css
â”‚   â”œâ”€â”€ PartnerBidding.jsx
â”‚   â”œâ”€â”€ PartnerBidding.css
â”‚   â”œâ”€â”€ AdvocateDashboard.jsx
â”‚   â”œâ”€â”€ AdvocateDashboard.css
â”‚   â”œâ”€â”€ ResourceCenter.jsx
â”‚   â”œâ”€â”€ ResourceCenter.css
â”‚   â””â”€â”€ common/
â”‚       â”œâ”€â”€ Header.jsx
â”‚       â”œâ”€â”€ Footer.jsx
â”‚       â”œâ”€â”€ Button.jsx
â”‚       â””â”€â”€ Modal.jsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.js
â”‚   â”œâ”€â”€ useApi.js
â”‚   â””â”€â”€ useLocalStorage.js
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api.js
â”‚   â”œâ”€â”€ auth.js
â”‚   â””â”€â”€ storage.js
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ variables.css
â”‚   â”œâ”€â”€ global.css
â”‚   â””â”€â”€ responsive.css
â””â”€â”€ pages/
    â”œâ”€â”€ Login.jsx
    â”œâ”€â”€ Dashboard.jsx
    â”œâ”€â”€ Audit.jsx
    â”œâ”€â”€ PartnerPortal.jsx
    â””â”€â”€ Resources.jsx
```

---

## PHASE 4: CONVERSION PROCESS (Per Code Task)

### Step 1: Identify Source Material
```
- Which thread(s) cover this code task?
- What specific requirements were mentioned?
- What data structures are implied?
- What edge cases were discussed?
```

### Step 2: Extract Requirements
```
Create a requirements.md for each task:
- Functional requirements (what it does)
- Technical requirements (how it does it)
- Data structure (input/output)
- Edge cases & error handling
- Testing approach
```

### Step 3: Write Clean Code
```
Code style guidelines:
- ES6+ syntax
- Comments for complex logic
- Meaningful variable names
- Error handling everywhere
- Unit tests alongside code
```

### Step 4: Create Copy-Paste Markdown
```
Format each code file as:
```markdown
# Filename: src/path/to/file.js

## Purpose
[What this does in 1-2 sentences]

## Dependencies
[What it imports]

## Code

\`\`\`javascript
[ACTUAL CODE]
\`\`\`

## Usage
[How to use it]

## Testing
[How to test it]

## Integration Points
[Where it fits in the system]
\`\`\`
```

### Step 5: Create Integration Guide
```
For each new component:
- How to wire it into server.js
- Import statements needed
- Configuration required
- Environment variables needed
- Testing checklist
```

---

## PHASE 5: EXECUTION TIMELINE

### Week 1: Core Backend
**Day 1-2:** Tasks 1.1 + 1.2 + 1.3
- Create adRotation.js
- Create carrierIntel.js
- Create LeadStore.js
- Write unit tests for each

**Day 3-4:** Task 1.4
- Create new endpoints
- Wire middleware
- Add error handling
- Integration testing

**Day 5:** Testing & Documentation
- Load testing
- Security audit
- Documentation finalization

### Week 2: Frontend & Database
**Day 1-2:** Tasks 2.1 + 2.2
- Create PartnerDashboard component
- Create styling
- Mock data testing
- Responsive design testing

**Day 3:** Task 2.3
- Create AuditResults display
- Integrate with audit engine
- Partner recommendations display

**Day 4-5:** Tasks 3.1 + 3.2
- Design database schema
- Create database client wrapper
- Migration scripts

### Week 3: Integration & Payment
**Day 1-2:** Tasks 4.1 + 4.2
- Stripe Connect setup
- Auth middleware
- Protected endpoints

**Day 3-4:** System Integration
- Wire all components together
- End-to-end testing
- Performance optimization

**Day 5:** Beta Testing
- Internal testing
- Partner beta feedback
- Final refinements

---

## CODE GENERATION TEMPLATE

Each code task will follow this template:

```markdown
# Code Task: [Task ID] - [Task Name]

## Source Requirements
- Thread: [Which thread(s)]
- Key quotes: [Direct quotes from prompts]
- Functional requirements: [What must it do]

## Architecture
- Input: [What goes in]
- Output: [What comes out]
- Dependencies: [What it needs]
- Related tasks: [Other tasks it connects to]

## Code Structure
- Main function(s): [Function names/signatures]
- Data structures: [Objects/types used]
- Error cases: [How failures handled]
- Edge cases: [Special scenarios]

## Copy-Paste Code

\`\`\`javascript
[COMPLETE, PRODUCTION-READY CODE]
\`\`\`

## Integration Steps
1. Copy file to: src/path/to/file.js
2. Import in: [Which files import this]
3. Wire endpoints: [If backend]
4. Test: [Test procedure]
5. Deploy: [Deployment notes]

## Testing Checklist
- [ ] Unit tests pass
- [ ] Integration tests pass
- [ ] Error scenarios handled
- [ ] Performance acceptable
- [ ] Security reviewed

## Success Criteria
- [Specific, measurable criteria]

## Related Tasks
- Task X.Y: [Related task]
```

---

## CONSOLIDATED PROMPT MAPPING

### Prompt: "Zero-Friction Audit"
**Maps to Tasks:** 1.2, 2.3, 3.1
**Output Files:** carrierIntel.js, AuditResults.jsx, schema.sql

### Prompt: "Name Your Price Bidding"
**Maps to Tasks:** 1.1, 1.4, 2.1
**Output Files:** adRotation.js, server.js updates, PartnerDashboard.jsx

### Prompt: "Lead Tracking & Affiliate Model"
**Maps to Tasks:** 1.3, 1.4, 4.1
**Output Files:** LeadStore.js, server.js updates, payments.js

### Prompt: "Partner Dashboard"
**Maps to Tasks:** 2.1, 2.2, 3.2
**Output Files:** PartnerDashboard.jsx, PartnerDashboard.css, database.js

### Prompt: "Advocate Pro Features"
**Maps to Tasks:** 2.3, 3.1, 3.2
**Output Files:** AdvocateDashboard.jsx, schema.sql, database.js

### Prompt: "Resource Ecosystem"
**Maps to Tasks:** 2.4 (new), 3.1
**Output Files:** ResourceCenter.jsx, schema.sql

---

## QUALITY GATES (Before Each Task Release)

```
âœ… Code Review
   - Follows style guide
   - No TODOs
   - Comments clear
   - No console.log()

âœ… Testing
   - Unit tests pass
   - Edge cases covered
   - Error handling works
   - Integration tested

âœ… Documentation
   - README clear
   - Comments comprehensive
   - Examples provided
   - Integration guide complete

âœ… Performance
   - No N+1 queries
   - Response time acceptable
   - Memory usage reasonable
   - Load tested

âœ… Security
   - Input validation
   - SQL injection prevented
   - XSS protected
   - CORS configured
   - Secrets protected
```

---

## FINAL OUTPUT FORMAT

Each completed code task will be delivered as:

**File:** `CODE-TASK-[ID]-[NAME].md`

```markdown
# Code Task [ID]: [Task Name]

[Complete conversion from prompt â†’ production code]

## ğŸ“‹ Summary
- What: [1 sentence]
- Why: [Business value]
- Where: [File path]
- When: [Timeline]

## ğŸ”§ Quick Start
[Copy-paste instructions]

## ğŸ“ Full Code
[Complete code with comments]

## ğŸ§ª Testing
[Test procedures]

## ğŸ”— Integration
[How it connects to other components]

## âœ… Deployment
[Deployment checklist]
```

---

## NEXT IMMEDIATE ACTIONS

1. **Select one task** (recommend Task 1.1: adRotation.js)
2. **Create requirements document** for that task
3. **Write code** following quality gates
4. **Create markdown delivery file**
5. **Test thoroughly**
6. **Move to next task**

**Timeline:** 1 task per 1-2 days = All code ready by end of Week 3

---

**Status:** READY FOR EXECUTION  
**Confidence:** 95%  
**Next Step:** Choose Task 1.1 and begin conversion

